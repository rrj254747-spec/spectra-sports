{% extends "layout.html" %}
{% block content %}

<div class="card signup-card">

    <h2 class="signup-title">Create Account</h2>

    <form method="POST" onsubmit="return validateSignup()">

        <label>Email</label>
        <input type="email"
               id="email"
               name="email"
               placeholder="Enter Your Email"
               required>

        <label>Password</label>
        <div class="password-wrapper">
            <input type="password"
                   name="password"
                   id="password"
                   placeholder="Create Password"
                   required
                   minlength="6"
                   oninput="checkStrength()">

            <span onclick="togglePassword()" class="eye-toggle">üëÅ</span>
        </div>

        <div id="strength" class="password-strength"></div>

        <button type="submit" class="btn-signup">
            Create Account
        </button>

    </form>

    <p class="login-text">
        Already have an account? <a href="/">Login</a>
    </p>

</div>

<style>
.signup-card {
    max-width: 420px;
    margin: 60px auto;
    animation: fadeIn 0.4s ease-in-out;
}

.signup-title {
    text-align: center;
    margin-bottom: 25px;
}

.password-wrapper {
    position: relative;
}

.eye-toggle {
    position: absolute;
    right: 12px;
    top: 12px;
    cursor: pointer;
    font-size: 14px;
}

.password-strength {
    font-size: 13px;
    margin-bottom: 15px;
    font-weight: 500;
}

.btn-signup {
    width: 100%;
}

.login-text {
    text-align: center;
    margin-top: 20px;
}

@keyframes fadeIn {
    from {opacity:0; transform:translateY(20px);}
    to {opacity:1; transform:translateY(0);}
}
</style>

<script>
function validateSignup() {

    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();

    if (!email) {
        alert("Email is required");
        return false;
    }

    if (!email.includes("@") || !email.includes(".")) {
        alert("Enter valid email address");
        return false;
    }

    if (!password) {
        alert("Password is required");
        return false;
    }

    if (password.length < 6) {
        alert("Password must be at least 6 characters");
        return false;
    }

    if (!/\d/.test(password)) {
        alert("Password must contain at least one number");
        return false;
    }

    return true;
}

function checkStrength() {
    const pwd = document.getElementById("password").value;
    const strength = document.getElementById("strength");

    if (pwd.length < 6) {
        strength.innerHTML = "Weak password";
        strength.style.color = "red";
    } else if (!/\d/.test(pwd)) {
        strength.innerHTML = "Medium strength (add a number)";
        strength.style.color = "orange";
    } else if (pwd.length < 10) {
        strength.innerHTML = "Good password";
        strength.style.color = "#3b82f6";
    } else {
        strength.innerHTML = "Strong password";
        strength.style.color = "green";
    }
}

function togglePassword() {
    const pwd = document.getElementById("password");
    pwd.type = pwd.type === "password" ? "text" : "password";
}
</script>

{% endblock %}